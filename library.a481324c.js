function e(e,t,n,o){Object.defineProperty(e,t,{get:n,set:o,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},a=n.parcelRequired7c6;null==a&&((a=function(e){if(e in o)return o[e].exports;if(e in r){var t=r[e];delete r[e];var n={id:e,exports:{}};return o[e]=n,t.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},n.parcelRequired7c6=a),a.register("kyEFX",(function(t,n){var o,r;e(t.exports,"register",(function(){return o}),(function(e){return o=e})),e(t.exports,"resolve",(function(){return r}),(function(e){return r=e}));var a={};o=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)a[t[n]]=e[t[n]]},r=function(e){var t=a[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),a("kyEFX").register(JSON.parse('{"5ZPII":"library.a481324c.js","i2NY3":"noimage.2ec20c5a.jpg"}'));const i={openModalBtn:document.querySelector("[data-modal-open-team]"),closeModalBtn:document.querySelector("[data-modal-close-team]"),modal:document.querySelector("[data-modal-team]")};function s(e){e.preventDefault(),i.modal.classList.toggle("is-hidden__footer")}i.openModalBtn.addEventListener("click",s),i.closeModalBtn.addEventListener("click",s);const l={watchedBtn:document.querySelector(".watched"),queueBtn:document.querySelector(".queue"),adwBtn:document.querySelector(".adw"),atqBtn:document.querySelector(".atq"),gokBtn:document.querySelector(".gok")};let c=-1,d=-1;try{localStorage.getItem("films")||localStorage.setItem("films",JSON.stringify([]));localStorage.getItem("queue")||localStorage.setItem("queue",JSON.stringify([]))}catch(e){console.log(e)}function u(e,t,n,o){let r=[];try{r=JSON.parse(localStorage.getItem(t))}catch(e){console.log(e)}if(r.length){const t=r.findIndex((t=>t.id===e.id));return t>-1?(console.log("Фільм знаходиться в збережених у памяті кнопка remove під номером - ",t),n.innerText="REMOVE TO "+o,t):(console.log("Фільма немає в збережених у памяті кнопка add to watch"),n.innerText="ADD TO "+o,-1)}return console.log("Список фільмів збережених у памяті пустий кнопка add to watch"),n.innerText="ADD TO "+o,0}function f(e,t,n,o){try{const r=JSON.parse(localStorage.getItem(t));r.push(e),localStorage.setItem(t,JSON.stringify(r)),console.log("фільм додано"),n.innerText="REMOVE TO "+o}catch(e){console.log(e)}}function g(e,t,n,o){try{const r=JSON.parse(localStorage.getItem(t));r.splice(e,1),localStorage.setItem(t,JSON.stringify(r)),console.log("фільм видалено"),n.innerText="ADD TO "+o}catch(e){console.log(e)}}function h(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){console.log(e)}}function h(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){console.log(e)}}l.adwBtn.addEventListener("click",(()=>{const e=l.adwBtn.innerText;console.log(e),"ADD TO WATCHED"===e?f(films[0],"films",l.adwBtn,"WATCHED"):g(c,"films",l.adwBtn,"WATCHED")})),l.watchedBtn.addEventListener("click",(()=>{h("films")})),l.queueBtn.addEventListener("click",(()=>{h("queue")})),l.atqBtn.addEventListener("click",(()=>{const e=l.atqBtn.innerText;console.log(e),"ADD TO QUEUE"===e?f(films[0],"queue",l.atqBtn,"QUEUE"):g(d,"queue",l.atqBtn,"QUEUE")})),l.gokBtn.addEventListener("click",(()=>{console.log("Рандомний фільм",films[0]),c=u(films[0],"films",l.adwBtn,"WATCHED"),d=u(films[0],"queue",l.atqBtn,"QUEUE")}));var m,p=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,v=/^0b[01]+$/i,b=/^0o[0-7]+$/i,C=parseInt,x="object"==typeof n&&n&&n.Object===Object&&n,_="object"==typeof self&&self&&self.Object===Object&&self,S=x||_||Function("return this")(),q=Object.prototype.toString,E=Math.max,T=Math.min,O=function(){return S.Date.now()};function B(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function L(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==q.call(e)}(e))return NaN;if(B(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=B(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(p,"");var n=v.test(e);return n||b.test(e)?C(e.slice(2),n?2:8):y.test(e)?NaN:+e}m=function(e,t,n){var o,r,a,i,s,l,c=0,d=!1,u=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function g(t){var n=o,a=r;return o=r=void 0,c=t,i=e.apply(a,n)}function h(e){return c=e,s=setTimeout(p,t),d?g(e):i}function m(e){var n=e-l;return void 0===l||n>=t||n<0||u&&e-c>=a}function p(){var e=O();if(m(e))return y(e);s=setTimeout(p,function(e){var n=t-(e-l);return u?T(n,a-(e-c)):n}(e))}function y(e){return s=void 0,f&&o?g(e):(o=r=void 0,i)}function v(){var e=O(),n=m(e);if(o=arguments,r=this,l=e,n){if(void 0===s)return h(l);if(u)return s=setTimeout(p,t),g(l)}return void 0===s&&(s=setTimeout(p,t)),i}return t=L(t)||0,B(n)&&(d=!!n.leading,a=(u="maxWait"in n)?E(L(n.maxWait)||0,t):a,f="trailing"in n?!!n.trailing:f),v.cancel=function(){void 0!==s&&clearTimeout(s),c=0,o=l=r=s=void 0},v.flush=function(){return void 0===s?i:y(O())},v};var w;w=new URL(a("kyEFX").resolve("i2NY3"),import.meta.url).toString();const k=document.querySelector(".js-spinner");function M(){k.classList.add("is-open")}function D(){setTimeout((function(){k.classList.remove("is-open")}),300)}const N={searchError:document.querySelector(".header__error-text"),emptyGalleryText:document.querySelector(".info-notify-text"),emptyGalleryImg:document.querySelector(".info-notify")};function $(e){N.emptyGalleryText.textContent=`${e}`,N.emptyGalleryImg.classList.remove("is-hidden")}function I(){N.emptyGalleryImg.classList.add("is-hidden")}const A=new class{fetchPopularMoviesMaxPage(){return fetch("https://api.themoviedb.org/3/trending/movie/day?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US").then((e=>e.json()))}fetchPopularMovies(){const e=`https://api.themoviedb.org/3/trending/movie/day?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US&page=${this.page}`;return fetch(e).then((e=>e.json())).then((({results:e})=>this.fetchFilmGenre().then((n=>e.map((e=>({...e,release_date:e.release_date?e.release_date.split("-")[0]:e.release_date,genres:this.filterGenres(n,e),poster_path:e.poster_path?`https://image.tmdb.org/t/p/w500/${e.poster_path}`:t(w)})))))))}filterGenres(e,t){let n=t.genre_ids.map((t=>e.filter((e=>e.id===t)).map((e=>e.name)))).flat();return 2===n.length&&(n=[`${n[0]}, ${n[1]}`]),n.length>2&&(n=`${n[0]}, ${n[1]}, Other`),n}filterGenresLib(e){let t=e.genres.map((e=>e.name)).flat();return 2===t.length&&(t=[`${t[0]}, ${t[1]}`]),t.length>2&&(t=`${t[0]}, ${t[1]}, Other`),t}fetchSearchMovies(){const e=`https://api.themoviedb.org/3/search/movie?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US&page=${this.page}&query=${this.searchQuery}`;return fetch(e).then((e=>e.json())).then((({results:e})=>this.fetchFilmGenre().then((n=>e.map((e=>({...e,release_date:e.release_date?e.release_date.split("-")[0]:e.release_date,genres:this.filterGenres(n,e),poster_path:e.poster_path?`https://image.tmdb.org/t/p/w500/${e.poster_path}`:t(w)})))))))}fetchFilmByID(e){return fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US`).then((e=>e.json())).then((e=>({...e,release_date:e.release_date?e.release_date.split("-")[0]:e.release_date,genres:this.filterGenresLib(e),poster_path:e.poster_path?`https://image.tmdb.org/t/p/w500/${e.poster_path}`:t(w)})))}fetchFilmGenre(){return fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US").then((e=>e.json())).then((({genres:e})=>e))}fetchPopularMoviesPages(){const e=`https://api.themoviedb.org/3/trending/movie/day?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US&page=${this.page}`;return fetch(e).then((e=>e.json()))}fetchSearchMoviesPages(){const e=`https://api.themoviedb.org/3/trending/movie/day?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US&page=${this.page}&query=${this.searchQuery}`;return fetch(e).then((e=>e.json()))}fetchTrailers(e){return fetch(`https://youtube.googleapis.com/youtube/v3/search?part=snippet&q=${e} + "trailer"&key=AIzaSyBsjU_AyffyMHxyv2KNKiEnDPB3n0dY8XE`).then((e=>e.json())).then((e=>e.items[0].id.videoId))}get pageNum(){return this.page}set pageNum(e){this.page=e}resetPageNum(){return this.page=1}get maxPageNum(){return this.maxPage}set maxPageNum(e){this.maxPage=e}get query(){return this.searchQuery}set query(e){this.searchQuery=e}constructor(){this.searchQuery="",this.page=1,this.maxPage=1}},U={gallery:document.querySelector(".js-gallery"),search:document.querySelector(".header__form-input"),pagination:document.querySelector(".pagination")};function j(){H(),I(),X(),M(),A.fetchPopularMovies().then(P).catch(console.log).finally(D)}function J(){I(),M(),A.fetchSearchMovies().then((e=>{0===e.length?(N.searchError.classList.remove("is-hidden"),setTimeout((()=>N.searchError.classList.add("is-hidden")),2500),$("Film not found"),Q()):P(e)})).catch(console.log).finally(D)}function P(e){U.gallery.insertAdjacentHTML("beforeend",cardTpl(e))}function H(){U.gallery.innerHTML=""}function Q(){document.querySelectorAll(".film-average").forEach((e=>e.classList.remove("is-hidden"))),document.querySelectorAll(".card-delete-btn").forEach((e=>e.classList.remove("is-hidden"))),U.pagination.classList.add("is-hidden")}j(),U.search.addEventListener("input",t(m)((function(e){A.query=e.target.value,H(),Y(),A.resetPageNum(),U.pagination.classList.remove("is-hidden"),A.query?(X(),J()):j()}),1e3)),U.search.addEventListener("keydown",(function(e){if("Enter"===e.code||13===e.keyCode)return void e.preventDefault()}));const G=(e=1)=>{const t=`https://api.themoviedb.org/3/trending/movie/day?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US&page=${e}`,n=`https://api.themoviedb.org/3/search/movie?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US&page=${e}&query=${A.searchQuery}`;let o=A.searchQuery?n:t;return fetch(o).then((e=>e.json())).then((e=>e.total_pages))},R={dec:document.querySelector("#dec"),inc:document.querySelector("#inc"),page_numbers:document.querySelectorAll(".pag_text"),page_items:document.querySelectorAll(".pag_item"),pageMax:document.querySelector(".last_page"),dotsLeft:document.querySelector('[data-dots="left"]'),dotsRigth:document.querySelector('[data-dots="rigth"]'),middleBtn:document.querySelector("#l3"),btn4:document.querySelector("#l4"),btn2:document.querySelector("#l2"),pageFirst:document.querySelector(".first_page")};function F(){R.page_items.forEach((e=>e.classList.remove("pag_item__current")))}function W(e){e.classList.add("is-hidden")}function V(e){e.classList.remove("is-hidden")}function X(){G().then((e=>R.pageMax.firstChild.textContent=e))}function Y(){V(R.dotsRigth),R.btn2.firstChild.textContent="2",R.middleBtn.firstChild.textContent="3",R.btn4.firstChild.textContent="4",W(R.dotsLeft),F(),R.pageFirst.classList.add("pag_item__current")}R.inc.addEventListener("click",(()=>{G().then((e=>{+R.page_numbers[4].textContent!==e?(1==R.dec.disabled&&(R.dec.disabled=!1),R.page_items.forEach((e=>{1!=+e.firstChild.textContent&&"..."!==e.firstChild.textContent&&e.firstChild.textContent!==R.pageMax.firstChild.textContent&&e.firstChild.textContent++}))):R.inc.disabled=!0}))})),R.dec.addEventListener("click",(()=>{"1"!==R.page_numbers[0].textContent?(1==R.inc.disabled&&(R.inc.disabled=!1),R.page_numbers.forEach((e=>{e.textContent=+e.textContent-1}))):R.dec.disabled=!0})),R.page_items.forEach((e=>{e.addEventListener("click",(t=>{A.pageNum=e.firstChild.textContent,F(),"..."!==e.firstChild.textContent&&(setTimeout((()=>{e.firstChild.textContent,R.page_items.forEach((e=>{+A.pageNum==+e.firstChild.textContent&&e.classList.add("pag_item__current")}))}),300),t.currentTarget===R.btn4&&(R.page_items.forEach((e=>{1!=+e.firstChild.textContent&&"..."!==e.firstChild.textContent&&e.firstChild.textContent!==R.pageMax.firstChild.textContent&&e.firstChild.textContent++})),V(R.dotsLeft)),t.currentTarget===R.btn2&&3==+e.firstChild.textContent&&(R.page_items.forEach((e=>{1!=+e.firstChild.textContent&&"..."!==e.firstChild.textContent&&e.firstChild.textContent!==R.pageMax.firstChild.textContent&&e.firstChild.textContent--})),W(R.dotsLeft)),t.currentTarget===R.btn2&&+e.firstChild.textContent>3&&R.page_items.forEach((e=>{1!=+e.firstChild.textContent&&"..."!==e.firstChild.textContent&&e.firstChild.textContent!==R.pageMax.firstChild.textContent&&e.firstChild.textContent--})),1==+e.firstChild.textContent&&(V(R.dotsRigth),R.btn2.firstChild.textContent="2",R.middleBtn.firstChild.textContent="3",R.btn4.firstChild.textContent="4",W(R.dotsLeft)),e.firstChild.textContent===R.pageMax.firstChild.textContent&&(V(R.dotsLeft),R.btn2.firstChild.textContent=+R.pageMax.firstChild.textContent-3,R.middleBtn.firstChild.textContent=+R.pageMax.firstChild.textContent-2,R.btn4.firstChild.textContent=+R.pageMax.firstChild.textContent-1,W(R.dotsRigth)),t.currentTarget===R.btn2&&+R.pageMax.firstChild.textContent-3&&V(R.dotsRigth),t.currentTarget===R.btn4&&+t.currentTarget.firstChild.textContent==+R.pageMax.firstChild.textContent-1&&W(R.dotsRigth),H(),A.searchQuery?J():j())}))})),a("9S3j6");const K={watchedBtn:document.querySelector(".watched"),queueBtn:document.querySelector(".queue"),adwBtn:document.querySelector(".adw"),atqBtn:document.querySelector(".atq"),gokBtn:document.querySelector(".gok")};let z=-1,Z=-1,ee=0;try{localStorage.getItem("films")||localStorage.setItem("films",JSON.stringify([]));localStorage.getItem("queue")||localStorage.setItem("queue",JSON.stringify([]))}catch(e){console.log(e)}function te(e,t,n,o){let r=[];try{r=JSON.parse(localStorage.getItem(t))}catch(e){console.log(e)}if(r.length){const t=r.findIndex((t=>t.id===e.id));return t>-1?(console.log("Фільм знаходиться в збережених у памяті кнопка remove під номером - ",t),n.innerText="REMOVE TO "+o,t):(console.log("Фільма немає в збережених у памяті кнопка add to watch"),n.innerText="ADD TO "+o,-1)}return console.log("Список фільмів збережених у памяті пустий кнопка add to watch"),n.innerText="ADD TO "+o,0}function ne(e,t,n,o){try{const r=JSON.parse(localStorage.getItem(t));r.push(e),localStorage.setItem(t,JSON.stringify(r)),console.log("фільм додано"),n.innerText="REMOVE TO "+o}catch(e){console.log(e)}}function oe(e,t,n,o){try{const r=JSON.parse(localStorage.getItem(t));r.splice(e,1),localStorage.setItem(t,JSON.stringify(r)),console.log("фільм видалено"),n.innerText="ADD TO "+o}catch(e){console.log(e)}}function re(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){console.log(e)}}function re(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){console.log(e)}}K.adwBtn.addEventListener("click",(()=>{const e=K.adwBtn.innerText;console.log(e),"ADD TO WATCHED"===e?ne(films[ee],"films",K.adwBtn,"WATCHED"):oe(z,"films",K.adwBtn,"WATCHED")})),K.watchedBtn.addEventListener("click",(()=>{re("films")})),K.queueBtn.addEventListener("click",(()=>{re("queue")})),K.atqBtn.addEventListener("click",(()=>{const e=K.atqBtn.innerText;console.log(e),"ADD TO QUEUE"===e?ne(films[ee],"queue",K.atqBtn,"QUEUE"):oe(Z,"queue",K.atqBtn,"QUEUE")})),K.gokBtn.addEventListener("click",(()=>{ee=Math.floor(7*Math.random()),console.log("Рандомний фільм",films[ee]),z=te(films[ee],"films",K.adwBtn,"WATCHED"),Z=te(films[ee],"queue",K.atqBtn,"QUEUE")})),a("cyVPf");function ae(e){return`\n    <div class="backdrop" data-modal>\n      <div class="modal">\n        <button type="button" class="modal-close" data-modal-close>\n          <img src="./images/close.svg" alt="modal-close" width="30" height="30" />\n        </button>\n        <div class="modal-poster">\n          <img\n            class="modal-poster__img"\n            src="https://image.tmdb.org/t/p/original/${e.poster_path}"\n            alt="${e.title}"\n          />\n        </div>\n        <div class="modal-descr">\n          <p class="modal-title">${e.title}</p>\n          <table class="modal-info">\n            <tr>\n              <td class="modal-info__param">Vote / Votes</td>\n              <td class="modal-info__data">\n                <span class="modal-info__data-vote">${e.vote_average}</span>\n                /\n                <span class="modal-info__data-votes">${e.vote_count}</span>\n              </td>\n            </tr>\n            <tr>\n              <td class="modal-info__param">Popularity</td>\n              <td class="modal-info__data">${e.popularity}</td>\n            </tr>\n            <tr>\n              <td class="modal-info__param">Original Title</td>\n              <td class="modal-info__data">${e.original_title}</td>\n            </tr>\n            <tr>\n              <td class="modal-info__param">Genre</td>\n              <td class="modal-info__data">${e.genres[0].name}</td>\n            </tr>\n          </table>\n          <h4 class="modal-about">ABOUT</h4>\n          <p class="modal-description">${e.overview}</p>\n          <div class="modal-btns">\n            <button class="btn modal-watched">ADD TO WATCHED</button>\n            <button class="btn modal-queue">ADD TO QUEUE</button>\n          </div>\n        </div>\n      </div>\n    </div>`}const ie=document.querySelector("body"),se=(document.querySelector(".backdrop"),document.querySelector("js-gallery")),le=new class{fetchMovie(){const e=`https://api.themoviedb.org/${this.id}/movie/550?api_key=1f93214cb1bbadcc143eeb01d552ab8c`;return fetch(e).then((e=>(e.ok,e.json()))).catch((e=>console.log(e)))}get query(){return this.id}set query(e){this.id=e}constructor(){this.id=""}};function ce(e){console.log(e),ie.insertAdjacentHTML("beforeend",ae(e))}se.addEventListener("click",(function(e){if("IMG"!==e.target.nodeName)return;le.query=e.target.datafilmid,le.fetchMovie().then(ce)}));
//# sourceMappingURL=library.a481324c.js.map
