function e(e,t,n,r){Object.defineProperty(e,t,{get:n,set:r,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},r={},i={},o=n.parcelRequired7c6;null==o&&((o=function(e){if(e in r)return r[e].exports;if(e in i){var t=i[e];delete i[e];var n={id:e,exports:{}};return r[e]=n,t.call(n.exports,n,n.exports),n.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){i[e]=t},n.parcelRequired7c6=o),o.register("kyEFX",(function(t,n){var r,i;e(t.exports,"register",(function(){return r}),(function(e){return r=e})),e(t.exports,"resolve",(function(){return i}),(function(e){return i=e}));var o={};r=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)o[t[n]]=e[t[n]]},i=function(e){var t=o[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),o("kyEFX").register(JSON.parse('{"5ZPII":"index.322ff631.js","i2NY3":"noimage.2ec20c5a.jpg"}')),(()=>{const e={openModalBtn:document.querySelector("[data-modal-open-team]"),closeModalBtn:document.querySelector("[data-modal-close-team]"),modal:document.querySelector("[data-modal-team]")};function t(){event.preventDefault(),e.modal.classList.toggle("is-hidden")}e.openModalBtn.addEventListener("click",t),e.closeModalBtn.addEventListener("click",t)})();const a={watchedBtn:document.querySelector(".watched"),queueBtn:document.querySelector(".queue"),adwBtn:document.querySelector(".adw"),atqBtn:document.querySelector(".atq"),gokBtn:document.querySelector(".gok")};let s=-1,c=-1;try{localStorage.getItem("films")||localStorage.setItem("films",JSON.stringify([]));localStorage.getItem("queue")||localStorage.setItem("queue",JSON.stringify([]))}catch(e){console.log(e)}function l(e,t,n,r){let i=[];try{i=JSON.parse(localStorage.getItem(t))}catch(e){console.log(e)}if(i.length){const t=i.findIndex((t=>t.id===e.id));return t>-1?(console.log("Фільм знаходиться в збережених у памяті кнопка remove під номером - ",t),n.innerText="REMOVE TO "+r,t):(console.log("Фільма немає в збережених у памяті кнопка add to watch"),n.innerText="ADD TO "+r,-1)}return console.log("Список фільмів збережених у памяті пустий кнопка add to watch"),n.innerText="ADD TO "+r,0}function d(e,t,n,r){try{const i=JSON.parse(localStorage.getItem(t));i.push(e),localStorage.setItem(t,JSON.stringify(i)),console.log("фільм додано"),n.innerText="REMOVE TO "+r}catch(e){console.log(e)}}function u(e,t,n,r){try{const i=JSON.parse(localStorage.getItem(t));i.splice(e,1),localStorage.setItem(t,JSON.stringify(i)),console.log("фільм видалено"),n.innerText="ADD TO "+r}catch(e){console.log(e)}}function f(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){console.log(e)}}function f(e){try{return JSON.parse(localStorage.getItem(e))}catch(e){console.log(e)}}a.adwBtn.addEventListener("click",(()=>{const e=a.adwBtn.innerText;console.log(e),"ADD TO WATCHED"===e?d(films[0],"films",a.adwBtn,"WATCHED"):u(s,"films",a.adwBtn,"WATCHED")})),a.watchedBtn.addEventListener("click",(()=>{f("films")})),a.queueBtn.addEventListener("click",(()=>{f("queue")})),a.atqBtn.addEventListener("click",(()=>{const e=a.atqBtn.innerText;console.log(e),"ADD TO QUEUE"===e?d(films[0],"queue",a.atqBtn,"QUEUE"):u(c,"queue",a.atqBtn,"QUEUE")})),a.gokBtn.addEventListener("click",(()=>{console.log("Рандомний фільм",films[0]),s=l(films[0],"films",a.adwBtn,"WATCHED"),c=l(films[0],"queue",a.atqBtn,"QUEUE")}));var h,g=/^\s+|\s+$/g,p=/^[-+]0x[0-9a-f]+$/i,m=/^0b[01]+$/i,y=/^0o[0-7]+$/i,C=parseInt,x="object"==typeof n&&n&&n.Object===Object&&n,v="object"==typeof self&&self&&self.Object===Object&&self,b=x||v||Function("return this")(),_=Object.prototype.toString,S=Math.max,q=Math.min,E=function(){return b.Date.now()};function T(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function L(e){if("number"==typeof e)return e;if(function(e){return"symbol"==typeof e||function(e){return!!e&&"object"==typeof e}(e)&&"[object Symbol]"==_.call(e)}(e))return NaN;if(T(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=T(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(g,"");var n=m.test(e);return n||y.test(e)?C(e.slice(2),n?2:8):p.test(e)?NaN:+e}h=function(e,t,n){var r,i,o,a,s,c,l=0,d=!1,u=!1,f=!0;if("function"!=typeof e)throw new TypeError("Expected a function");function h(t){var n=r,o=i;return r=i=void 0,l=t,a=e.apply(o,n)}function g(e){return l=e,s=setTimeout(m,t),d?h(e):a}function p(e){var n=e-c;return void 0===c||n>=t||n<0||u&&e-l>=o}function m(){var e=E();if(p(e))return y(e);s=setTimeout(m,function(e){var n=t-(e-c);return u?q(n,o-(e-l)):n}(e))}function y(e){return s=void 0,f&&r?h(e):(r=i=void 0,a)}function C(){var e=E(),n=p(e);if(r=arguments,i=this,c=e,n){if(void 0===s)return g(c);if(u)return s=setTimeout(m,t),h(c)}return void 0===s&&(s=setTimeout(m,t)),a}return t=L(t)||0,T(n)&&(d=!!n.leading,o=(u="maxWait"in n)?S(L(n.maxWait)||0,t):o,f="trailing"in n?!!n.trailing:f),C.cancel=function(){void 0!==s&&clearTimeout(s),l=0,r=c=i=s=void 0},C.flush=function(){return void 0===s?a:y(E())},C};var M;M=new URL(o("kyEFX").resolve("i2NY3"),import.meta.url).toString();const O=document.querySelector(".js-spinner");function w(){O.classList.add("is-open")}function k(){setTimeout((function(){O.classList.remove("is-open")}),300)}const B={searchError:document.querySelector(".header__error-text"),emptyGalleryText:document.querySelector(".info-notify-text"),emptyGalleryImg:document.querySelector(".info-notify")};function j(e){B.emptyGalleryText.textContent=`${e}`,B.emptyGalleryImg.classList.remove("is-hidden")}function N(){B.emptyGalleryImg.classList.add("is-hidden")}const $=new class{fetchPopularMoviesMaxPage(){return fetch("https://api.themoviedb.org/3/trending/movie/day?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US").then((e=>e.json()))}fetchPopularMovies(){const e=`https://api.themoviedb.org/3/trending/movie/day?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US&page=${this.page}`;return fetch(e).then((e=>e.json())).then((({results:e})=>this.fetchFilmGenre().then((n=>e.map((e=>({...e,release_date:e.release_date?e.release_date.split("-")[0]:e.release_date,genres:this.filterGenres(n,e),poster_path:e.poster_path?`https://image.tmdb.org/t/p/w500/${e.poster_path}`:t(M)})))))))}filterGenres(e,t){let n=t.genre_ids.map((t=>e.filter((e=>e.id===t)).map((e=>e.name)))).flat();return 2===n.length&&(n=[`${n[0]}, ${n[1]}`]),n.length>2&&(n=`${n[0]}, ${n[1]}, Other`),n}filterGenresLib(e){let t=e.genres.map((e=>e.name)).flat();return 2===t.length&&(t=[`${t[0]}, ${t[1]}`]),t.length>2&&(t=`${t[0]}, ${t[1]}, Other`),t}fetchSearchMovies(){const e=`https://api.themoviedb.org/3/search/movie?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US&page=${this.page}&query=${this.searchQuery}`;return fetch(e).then((e=>e.json())).then((({results:e})=>this.fetchFilmGenre().then((n=>e.map((e=>({...e,release_date:e.release_date?e.release_date.split("-")[0]:e.release_date,genres:this.filterGenres(n,e),poster_path:e.poster_path?`https://image.tmdb.org/t/p/w500/${e.poster_path}`:t(M)})))))))}fetchFilmByID(e){return fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US`).then((e=>e.json())).then((e=>({...e,release_date:e.release_date?e.release_date.split("-")[0]:e.release_date,genres:this.filterGenresLib(e),poster_path:e.poster_path?`https://image.tmdb.org/t/p/w500/${e.poster_path}`:t(M)})))}fetchFilmGenre(){return fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US").then((e=>e.json())).then((({genres:e})=>e))}fetchPopularMoviesPages(){const e=`https://api.themoviedb.org/3/trending/movie/day?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US&page=${this.page}`;return fetch(e).then((e=>e.json()))}fetchSearchMoviesPages(){const e=`https://api.themoviedb.org/3/trending/movie/day?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US&page=${this.page}&query=${this.searchQuery}`;return fetch(e).then((e=>e.json()))}fetchTrailers(e){return fetch(`https://youtube.googleapis.com/youtube/v3/search?part=snippet&q=${e} + "trailer"&key=AIzaSyBsjU_AyffyMHxyv2KNKiEnDPB3n0dY8XE`).then((e=>e.json())).then((e=>e.items[0].id.videoId))}get pageNum(){return this.page}set pageNum(e){this.page=e}resetPageNum(){return this.page=1}get maxPageNum(){return this.maxPage}set maxPageNum(e){this.maxPage=e}get query(){return this.searchQuery}set query(e){this.searchQuery=e}constructor(){this.searchQuery="",this.page=1,this.maxPage=1}},D={gallery:document.querySelector(".js-gallery"),search:document.querySelector(".header__form-input"),pagination:document.querySelector(".pagination")};function I(){P(),N(),W(),w(),$.fetchPopularMovies().then(A).catch(console.log).finally(k)}function U(){N(),w(),$.fetchSearchMovies().then((e=>{0===e.length?(B.searchError.classList.remove("is-hidden"),setTimeout((()=>B.searchError.classList.add("is-hidden")),2500),j("Film not found"),F()):A(e)})).catch(console.log).finally(k)}function A(e){D.gallery.insertAdjacentHTML("beforeend",cardTpl(e))}function P(){D.gallery.innerHTML=""}function F(){document.querySelectorAll(".film-average").forEach((e=>e.classList.remove("is-hidden"))),document.querySelectorAll(".card-delete-btn").forEach((e=>e.classList.remove("is-hidden"))),D.pagination.classList.add("is-hidden")}I(),D.search.addEventListener("input",t(h)((function(e){$.query=e.target.value,P(),X(),$.resetPageNum(),D.pagination.classList.remove("is-hidden"),$.query?(W(),U()):I()}),1e3)),D.search.addEventListener("keydown",(function(e){if("Enter"===e.code||13===e.keyCode)return void e.preventDefault()}));const G=(e=1)=>{const t=`https://api.themoviedb.org/3/trending/movie/day?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US&page=${e}`,n=`https://api.themoviedb.org/3/search/movie?api_key=2f8d6050c74d5f454a522d74a8cedbb8&language=en-US&page=${e}&query=${$.searchQuery}`;let r=$.searchQuery?n:t;return fetch(r).then((e=>e.json())).then((e=>e.total_pages))},R={dec:document.querySelector("#dec"),inc:document.querySelector("#inc"),page_numbers:document.querySelectorAll(".pag_text"),page_items:document.querySelectorAll(".pag_item"),pageMax:document.querySelector(".last_page"),dotsLeft:document.querySelector('[data-dots="left"]'),dotsRigth:document.querySelector('[data-dots="rigth"]'),middleBtn:document.querySelector("#l3"),btn4:document.querySelector("#l4"),btn2:document.querySelector("#l2"),pageFirst:document.querySelector(".first_page")};function Q(){R.page_items.forEach((e=>e.classList.remove("pag_item__current")))}function H(e){e.classList.add("is-hidden")}function J(e){e.classList.remove("is-hidden")}function W(){G().then((e=>R.pageMax.firstChild.textContent=e))}function X(){J(R.dotsRigth),R.btn2.firstChild.textContent="2",R.middleBtn.firstChild.textContent="3",R.btn4.firstChild.textContent="4",H(R.dotsLeft),Q(),R.pageFirst.classList.add("pag_item__current")}R.inc.addEventListener("click",(()=>{G().then((e=>{+R.page_numbers[4].textContent!==e?(1==R.dec.disabled&&(R.dec.disabled=!1),R.page_items.forEach((e=>{1!=+e.firstChild.textContent&&"..."!==e.firstChild.textContent&&e.firstChild.textContent!==R.pageMax.firstChild.textContent&&e.firstChild.textContent++}))):R.inc.disabled=!0}))})),R.dec.addEventListener("click",(()=>{"1"!==R.page_numbers[0].textContent?(1==R.inc.disabled&&(R.inc.disabled=!1),R.page_numbers.forEach((e=>{e.textContent=+e.textContent-1}))):R.dec.disabled=!0})),R.page_items.forEach((e=>{e.addEventListener("click",(t=>{$.pageNum=e.firstChild.textContent,Q(),"..."!==e.firstChild.textContent&&(setTimeout((()=>{e.firstChild.textContent,R.page_items.forEach((e=>{+$.pageNum==+e.firstChild.textContent&&e.classList.add("pag_item__current")}))}),300),t.currentTarget===R.btn4&&(R.page_items.forEach((e=>{1!=+e.firstChild.textContent&&"..."!==e.firstChild.textContent&&e.firstChild.textContent!==R.pageMax.firstChild.textContent&&e.firstChild.textContent++})),J(R.dotsLeft)),t.currentTarget===R.btn2&&3==+e.firstChild.textContent&&(R.page_items.forEach((e=>{1!=+e.firstChild.textContent&&"..."!==e.firstChild.textContent&&e.firstChild.textContent!==R.pageMax.firstChild.textContent&&e.firstChild.textContent--})),H(R.dotsLeft)),t.currentTarget===R.btn2&&+e.firstChild.textContent>3&&R.page_items.forEach((e=>{1!=+e.firstChild.textContent&&"..."!==e.firstChild.textContent&&e.firstChild.textContent!==R.pageMax.firstChild.textContent&&e.firstChild.textContent--})),1==+e.firstChild.textContent&&(J(R.dotsRigth),R.btn2.firstChild.textContent="2",R.middleBtn.firstChild.textContent="3",R.btn4.firstChild.textContent="4",H(R.dotsLeft)),e.firstChild.textContent===R.pageMax.firstChild.textContent&&(J(R.dotsLeft),R.btn2.firstChild.textContent=+R.pageMax.firstChild.textContent-3,R.middleBtn.firstChild.textContent=+R.pageMax.firstChild.textContent-2,R.btn4.firstChild.textContent=+R.pageMax.firstChild.textContent-1,H(R.dotsRigth)),t.currentTarget===R.btn2&&+R.pageMax.firstChild.textContent-3&&J(R.dotsRigth),t.currentTarget===R.btn4&&+t.currentTarget.firstChild.textContent==+R.pageMax.firstChild.textContent-1&&H(R.dotsRigth),P(),$.searchQuery?U():I())}))}));
//# sourceMappingURL=index.322ff631.js.map
