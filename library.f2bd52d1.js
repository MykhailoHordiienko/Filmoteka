!function(){function t(t,e,n,o){Object.defineProperty(t,e,{get:n,set:o,enumerable:!0,configurable:!0})}function e(t){return t&&t.__esModule?t.default:t}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},o={},r={},a=n.parcelRequired7c6;null==a&&((a=function(t){if(t in o)return o[t].exports;if(t in r){var e=r[t];delete r[t];var n={id:t,exports:{}};return o[t]=n,e.call(n.exports,n,n.exports),n.exports}var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(t,e){r[t]=e},n.parcelRequired7c6=a),a.register("iE7OH",(function(e,n){var o,r;t(e.exports,"register",(function(){return o}),(function(t){return o=t})),t(e.exports,"resolve",(function(){return r}),(function(t){return r=t}));var a={};o=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)a[e[n]]=t[e[n]]},r=function(t){var e=a[t];if(null==e)throw new Error("Could not resolve bundle with id "+t);return e}})),a.register("aNJCr",(function(e,n){var o;t(e.exports,"getBundleURL",(function(){return o}),(function(t){return o=t}));var r={};function a(t){return(""+t).replace(/^((?:https?|file|ftp|(chrome|moz)-extension):\/\/.+)\/[^/]+$/,"$1")+"/"}o=function(t){var e=r[t];return e||(e=function(){try{throw new Error}catch(e){var t=(""+e.stack).match(/(https?|file|ftp|(chrome|moz)-extension):\/\/[^)\n]+/g);if(t)return a(t[2])}return"/"}(),r[t]=e),e}})),a("iE7OH").register(JSON.parse('{"EVgbq":"library.f2bd52d1.js","1sXxD":"noimage.2ec20c5a.jpg"}')),function(){var t={openModalBtn:document.querySelector("[data-modal-open-team]"),closeModalBtn:document.querySelector("[data-modal-close-team]"),modal:document.querySelector("[data-modal-team]")};function e(e){e.preventDefault(),t.modal.classList.toggle("is-hidden__footer")}t.openModalBtn.addEventListener("click",e),t.closeModalBtn.addEventListener("click",e)}();var i={watchedBtn:document.querySelector(".watched"),queueBtn:document.querySelector(".queue"),adwBtn:document.querySelector(".adw"),atqBtn:document.querySelector(".atq"),gokBtn:document.querySelector(".gok")},c="films",l="queue",s=-1,u=-1;try{localStorage.getItem(c)||localStorage.setItem(c,JSON.stringify([])),localStorage.getItem(l)||localStorage.setItem(l,JSON.stringify([]))}catch(t){console.log(t)}function d(t,e,n,o){var r=[];try{r=JSON.parse(localStorage.getItem(e))}catch(t){console.log(t)}if(r.length){var a=r.findIndex((function(e){return e.id===t.id}));return a>-1?(console.log("Фільм знаходиться в збережених у памяті кнопка remove під номером - ",a),n.innerText="REMOVE TO "+o,a):(console.log("Фільма немає в збережених у памяті кнопка add to watch"),n.innerText="ADD TO "+o,-1)}return console.log("Список фільмів збережених у памяті пустий кнопка add to watch"),n.innerText="ADD TO "+o,0}function f(t,e,n,o){try{var r=JSON.parse(localStorage.getItem(e));r.push(t),localStorage.setItem(e,JSON.stringify(r)),console.log("фільм додано"),n.innerText="REMOVE TO "+o}catch(t){console.log(t)}}function g(t,e,n,o){try{var r=JSON.parse(localStorage.getItem(e));r.splice(t,1),localStorage.setItem(e,JSON.stringify(r)),console.log("фільм видалено"),n.innerText="ADD TO "+o}catch(t){console.log(t)}}function h(t){try{return JSON.parse(localStorage.getItem(t))}catch(t){console.log(t)}}function h(t){try{return JSON.parse(localStorage.getItem(t))}catch(t){console.log(t)}}i.adwBtn.addEventListener("click",(function(){var t=i.adwBtn.innerText;console.log(t),"ADD TO WATCHED"===t?f(films[0],c,i.adwBtn,"WATCHED"):g(s,c,i.adwBtn,"WATCHED")})),i.watchedBtn.addEventListener("click",(function(){h(c)})),i.queueBtn.addEventListener("click",(function(){h(l)})),i.atqBtn.addEventListener("click",(function(){var t=i.atqBtn.innerText;console.log(t),"ADD TO QUEUE"===t?f(films[0],l,i.atqBtn,"QUEUE"):g(u,l,i.atqBtn,"QUEUE")})),i.gokBtn.addEventListener("click",(function(){console.log("Рандомний фільм",films[0]),s=d(films[0],c,i.adwBtn,"WATCHED"),u=d(films[0],l,i.atqBtn,"QUEUE")}));var m,p=a("l5bVx"),v=/^\s+|\s+$/g,y=/^[-+]0x[0-9a-f]+$/i,C=/^0b[01]+$/i,x=/^0o[0-7]+$/i,_=parseInt,S="object"==typeof n&&n&&n.Object===Object&&n,b="object"==typeof self&&self&&self.Object===Object&&self,E=S||b||Function("return this")(),q=Object.prototype.toString,T=Math.max,O=Math.min,k=function(){return E.Date.now()};function B(t){var n=void 0===t?"undefined":e(p)(t);return!!t&&("object"==n||"function"==n)}function L(t){if("number"==typeof t)return t;if(function(t){return"symbol"==(void 0===t?"undefined":e(p)(t))||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==q.call(t)}(t))return NaN;if(B(t)){var n="function"==typeof t.valueOf?t.valueOf():t;t=B(n)?n+"":n}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(v,"");var o=C.test(t);return o||x.test(t)?_(t.slice(2),o?2:8):y.test(t)?NaN:+t}m=function(t,e,n){var o,r,a,i,c,l,s=0,u=!1,d=!1,f=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function g(e){var n=o,a=r;return o=r=void 0,s=e,i=t.apply(a,n)}function h(t){return s=t,c=setTimeout(p,e),u?g(t):i}function m(t){var n=t-l;return void 0===l||n>=e||n<0||d&&t-s>=a}function p(){var t=k();if(m(t))return v(t);c=setTimeout(p,function(t){var n=e-(t-l);return d?O(n,a-(t-s)):n}(t))}function v(t){return c=void 0,f&&o?g(t):(o=r=void 0,i)}function y(){var t=k(),n=m(t);if(o=arguments,r=this,l=t,n){if(void 0===c)return h(l);if(d)return c=setTimeout(p,e),g(l)}return void 0===c&&(c=setTimeout(p,e)),i}return e=L(e)||0,B(n)&&(u=!!n.leading,a=(d="maxWait"in n)?T(L(n.maxWait)||0,e):a,f="trailing"in n?!!n.trailing:f),y.cancel=function(){void 0!==c&&clearTimeout(c),s=0,o=l=r=c=void 0},y.flush=function(){return void 0===c?i:v(k())},y};var w,D=a("8MBJY"),M=a("a2hTj"),N=a("dDDEV");w=a("aNJCr").getBundleURL("EVgbq")+a("iE7OH").resolve("1sXxD");var U="2f8d6050c74d5f454a522d74a8cedbb8",j="https://api.themoviedb.org/3",A=function(){"use strict";function t(){e(D)(this,t),this.searchQuery="",this.page=1,this.maxPage=1}return e(M)(t,[{key:"fetchPopularMoviesMaxPage",value:function(){return fetch("".concat(j,"/trending/movie/day?api_key=").concat(U,"&language=en-US")).then((function(t){return t.json()}))}},{key:"fetchPopularMovies",value:function(){var t=this,n="".concat(j,"/trending/movie/day?api_key=").concat(U,"&language=en-US&page=").concat(this.page);return fetch(n).then((function(t){return t.json()})).then((function(n){var o=n.results,r=t;return t.fetchFilmGenre().then((function(t){var n=r;return o.map((function(o){return e(N)({},o,{release_date:o.release_date?o.release_date.split("-")[0]:o.release_date,genres:n.filterGenres(t,o),poster_path:o.poster_path?"https://image.tmdb.org/t/p/w500/".concat(o.poster_path):e(w)})}))}))}))}},{key:"filterGenres",value:function(t,e){var n=e.genre_ids.map((function(e){return t.filter((function(t){return t.id===e})).map((function(t){return t.name}))})).flat();return 2===n.length&&(n=["".concat(n[0],", ").concat(n[1])]),n.length>2&&(n="".concat(n[0],", ").concat(n[1],", Other")),n}},{key:"filterGenresLib",value:function(t){var e=t.genres.map((function(t){return t.name})).flat();return 2===e.length&&(e=["".concat(e[0],", ").concat(e[1])]),e.length>2&&(e="".concat(e[0],", ").concat(e[1],", Other")),e}},{key:"fetchSearchMovies",value:function(){var t=this,n="".concat(j,"/search/movie?api_key=").concat(U,"&language=en-US&page=").concat(this.page,"&query=").concat(this.searchQuery);return fetch(n).then((function(t){return t.json()})).then((function(n){var o=n.results,r=t;return t.fetchFilmGenre().then((function(t){var n=r;return o.map((function(o){return e(N)({},o,{release_date:o.release_date?o.release_date.split("-")[0]:o.release_date,genres:n.filterGenres(t,o),poster_path:o.poster_path?"https://image.tmdb.org/t/p/w500/".concat(o.poster_path):e(w)})}))}))}))}},{key:"fetchFilmByID",value:function(t){var n=this,o="".concat(j,"/movie/").concat(t,"?api_key=").concat(U,"&language=en-US");return fetch(o).then((function(t){return t.json()})).then((function(t){return e(N)({},t,{release_date:t.release_date?t.release_date.split("-")[0]:t.release_date,genres:n.filterGenresLib(t),poster_path:t.poster_path?"https://image.tmdb.org/t/p/w500/".concat(t.poster_path):e(w)})}))}},{key:"fetchFilmGenre",value:function(){var t="".concat(j,"/genre/movie/list?api_key=").concat(U,"&language=en-US");return fetch(t).then((function(t){return t.json()})).then((function(t){return t.genres}))}},{key:"fetchPopularMoviesPages",value:function(){var t="".concat(j,"/trending/movie/day?api_key=").concat(U,"&language=en-US&page=").concat(this.page);return fetch(t).then((function(t){return t.json()}))}},{key:"fetchSearchMoviesPages",value:function(){var t="".concat(j,"/trending/movie/day?api_key=").concat(U,"&language=en-US&page=").concat(this.page,"&query=").concat(this.searchQuery);return fetch(t).then((function(t){return t.json()}))}},{key:"fetchTrailers",value:function(t){var e="".concat("https://youtube.googleapis.com/youtube/v3/search?part=snippet","&q=").concat(t,' + "trailer"&key=').concat("AIzaSyBsjU_AyffyMHxyv2KNKiEnDPB3n0dY8XE");return fetch(e).then((function(t){return t.json()})).then((function(t){return t.items[0].id.videoId}))}},{key:"pageNum",get:function(){return this.page},set:function(t){this.page=t}},{key:"resetPageNum",value:function(){return this.page=1}},{key:"maxPageNum",get:function(){return this.maxPage},set:function(t){this.maxPage=t}},{key:"query",get:function(){return this.searchQuery},set:function(t){this.searchQuery=t}}]),t}(),I=document.querySelector(".js-spinner");function J(){I.classList.add("is-open")}function H(){setTimeout((function(){I.classList.remove("is-open")}),300)}var Q={searchError:document.querySelector(".header__error-text"),emptyGalleryText:document.querySelector(".info-notify-text"),emptyGalleryImg:document.querySelector(".info-notify")};function P(t){Q.emptyGalleryText.textContent="".concat(t),Q.emptyGalleryImg.classList.remove("is-hidden")}function R(){Q.emptyGalleryImg.classList.add("is-hidden")}var G=new A,F={gallery:document.querySelector(".js-gallery"),search:document.querySelector(".header__form-input"),pagination:document.querySelector(".pagination")};function W(){z(),R(),rt(),J(),G.fetchPopularMovies().then($).catch(console.log).finally(H)}function V(){R(),J(),G.fetchSearchMovies().then((function(t){0===t.length?(Q.searchError.classList.remove("is-hidden"),setTimeout((function(){return Q.searchError.classList.add("is-hidden")}),2500),P("Film not found"),X()):$(t)})).catch(console.log).finally(H)}function $(t){F.gallery.insertAdjacentHTML("beforeend",cardTpl(t))}function z(){F.gallery.innerHTML=""}function X(){document.querySelectorAll(".film-average").forEach((function(t){return t.classList.remove("is-hidden")})),document.querySelectorAll(".card-delete-btn").forEach((function(t){return t.classList.remove("is-hidden")})),F.pagination.classList.add("is-hidden")}W(),F.search.addEventListener("input",e(m)((function(t){G.query=t.target.value,z(),at(),G.resetPageNum(),F.pagination.classList.remove("is-hidden"),G.query?(rt(),V()):W()}),1e3)),F.search.addEventListener("keydown",(function(t){if("Enter"===t.code||13===t.keyCode)return void t.preventDefault()}));var Y="2f8d6050c74d5f454a522d74a8cedbb8",K="https://api.themoviedb.org/3",Z=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e="".concat(K,"/trending/movie/day?api_key=").concat(Y,"&language=en-US&page=").concat(t),n="".concat(K,"/search/movie?api_key=").concat(Y,"&language=en-US&page=").concat(t,"&query=").concat(G.searchQuery),o=G.searchQuery?n:e;return fetch(o).then((function(t){return t.json()})).then((function(t){return t.total_pages}))},tt={dec:document.querySelector("#dec"),inc:document.querySelector("#inc"),page_numbers:document.querySelectorAll(".pag_text"),page_items:document.querySelectorAll(".pag_item"),pageMax:document.querySelector(".last_page"),dotsLeft:document.querySelector('[data-dots="left"]'),dotsRigth:document.querySelector('[data-dots="rigth"]'),middleBtn:document.querySelector("#l3"),btn4:document.querySelector("#l4"),btn2:document.querySelector("#l2"),pageFirst:document.querySelector(".first_page")};function et(){tt.page_items.forEach((function(t){return t.classList.remove("pag_item__current")}))}function nt(t){t.classList.add("is-hidden")}function ot(t){t.classList.remove("is-hidden")}function rt(){Z().then((function(t){return tt.pageMax.firstChild.textContent=t}))}function at(){ot(tt.dotsRigth),tt.btn2.firstChild.textContent="2",tt.middleBtn.firstChild.textContent="3",tt.btn4.firstChild.textContent="4",nt(tt.dotsLeft),et(),tt.pageFirst.classList.add("pag_item__current")}tt.inc.addEventListener("click",(function(){Z().then((function(t){+tt.page_numbers[4].textContent!==t?(1==tt.dec.disabled&&(tt.dec.disabled=!1),tt.page_items.forEach((function(t){1!=+t.firstChild.textContent&&"..."!==t.firstChild.textContent&&t.firstChild.textContent!==tt.pageMax.firstChild.textContent&&t.firstChild.textContent++}))):tt.inc.disabled=!0}))})),tt.dec.addEventListener("click",(function(){"1"!==tt.page_numbers[0].textContent?(1==tt.inc.disabled&&(tt.inc.disabled=!1),tt.page_numbers.forEach((function(t){t.textContent=+t.textContent-1}))):tt.dec.disabled=!0})),tt.page_items.forEach((function(t){t.addEventListener("click",(function(e){G.pageNum=t.firstChild.textContent,et(),"..."!==t.firstChild.textContent&&(setTimeout((function(){t.firstChild.textContent,tt.page_items.forEach((function(t){+G.pageNum==+t.firstChild.textContent&&t.classList.add("pag_item__current")}))}),300),e.currentTarget===tt.btn4&&(tt.page_items.forEach((function(t){1!=+t.firstChild.textContent&&"..."!==t.firstChild.textContent&&t.firstChild.textContent!==tt.pageMax.firstChild.textContent&&t.firstChild.textContent++})),ot(tt.dotsLeft)),e.currentTarget===tt.btn2&&3==+t.firstChild.textContent&&(tt.page_items.forEach((function(t){1!=+t.firstChild.textContent&&"..."!==t.firstChild.textContent&&t.firstChild.textContent!==tt.pageMax.firstChild.textContent&&t.firstChild.textContent--})),nt(tt.dotsLeft)),e.currentTarget===tt.btn2&&+t.firstChild.textContent>3&&tt.page_items.forEach((function(t){1!=+t.firstChild.textContent&&"..."!==t.firstChild.textContent&&t.firstChild.textContent!==tt.pageMax.firstChild.textContent&&t.firstChild.textContent--})),1==+t.firstChild.textContent&&(ot(tt.dotsRigth),tt.btn2.firstChild.textContent="2",tt.middleBtn.firstChild.textContent="3",tt.btn4.firstChild.textContent="4",nt(tt.dotsLeft)),t.firstChild.textContent===tt.pageMax.firstChild.textContent&&(ot(tt.dotsLeft),tt.btn2.firstChild.textContent=+tt.pageMax.firstChild.textContent-3,tt.middleBtn.firstChild.textContent=+tt.pageMax.firstChild.textContent-2,tt.btn4.firstChild.textContent=+tt.pageMax.firstChild.textContent-1,nt(tt.dotsRigth)),e.currentTarget===tt.btn2&&+tt.pageMax.firstChild.textContent-3&&ot(tt.dotsRigth),e.currentTarget===tt.btn4&&+e.currentTarget.firstChild.textContent==+tt.pageMax.firstChild.textContent-1&&nt(tt.dotsRigth),z(),G.searchQuery?V():W())}))})),a("18qdp");var it={watchedBtn:document.querySelector(".watched"),queueBtn:document.querySelector(".queue"),adwBtn:document.querySelector(".adw"),atqBtn:document.querySelector(".atq"),gokBtn:document.querySelector(".gok")},ct="films",lt="queue",st=-1,ut=-1,dt=0;try{localStorage.getItem(ct)||localStorage.setItem(ct,JSON.stringify([])),localStorage.getItem(lt)||localStorage.setItem(lt,JSON.stringify([]))}catch(t){console.log(t)}function ft(t,e,n,o){var r=[];try{r=JSON.parse(localStorage.getItem(e))}catch(t){console.log(t)}if(r.length){var a=r.findIndex((function(e){return e.id===t.id}));return a>-1?(console.log("Фільм знаходиться в збережених у памяті кнопка remove під номером - ",a),n.innerText="REMOVE TO "+o,a):(console.log("Фільма немає в збережених у памяті кнопка add to watch"),n.innerText="ADD TO "+o,-1)}return console.log("Список фільмів збережених у памяті пустий кнопка add to watch"),n.innerText="ADD TO "+o,0}function gt(t,e,n,o){try{var r=JSON.parse(localStorage.getItem(e));r.push(t),localStorage.setItem(e,JSON.stringify(r)),console.log("фільм додано"),n.innerText="REMOVE TO "+o}catch(t){console.log(t)}}function ht(t,e,n,o){try{var r=JSON.parse(localStorage.getItem(e));r.splice(t,1),localStorage.setItem(e,JSON.stringify(r)),console.log("фільм видалено"),n.innerText="ADD TO "+o}catch(t){console.log(t)}}function mt(t){try{return JSON.parse(localStorage.getItem(t))}catch(t){console.log(t)}}function mt(t){try{return JSON.parse(localStorage.getItem(t))}catch(t){console.log(t)}}it.adwBtn.addEventListener("click",(function(){var t=it.adwBtn.innerText;console.log(t),"ADD TO WATCHED"===t?gt(films[dt],ct,it.adwBtn,"WATCHED"):ht(st,ct,it.adwBtn,"WATCHED")})),it.watchedBtn.addEventListener("click",(function(){mt(ct)})),it.queueBtn.addEventListener("click",(function(){mt(lt)})),it.atqBtn.addEventListener("click",(function(){var t=it.atqBtn.innerText;console.log(t),"ADD TO QUEUE"===t?gt(films[dt],lt,it.atqBtn,"QUEUE"):ht(ut,lt,it.atqBtn,"QUEUE")})),it.gokBtn.addEventListener("click",(function(){dt=Math.floor(7*Math.random()),console.log("Рандомний фільм",films[dt]),st=ft(films[dt],ct,it.adwBtn,"WATCHED"),ut=ft(films[dt],lt,it.atqBtn,"QUEUE")})),a("2hEST");D=a("8MBJY"),M=a("a2hTj");var pt=function(){"use strict";function t(){e(D)(this,t),this.id=""}return e(M)(t,[{key:"fetchMovie",value:function(){var t="".concat("https://api.themoviedb.org/").concat(this.id,"/movie/550?api_key=").concat("1f93214cb1bbadcc143eeb01d552ab8c");return fetch(t).then((function(t){return t.ok,t.json()})).catch((function(t){return console.log(t)}))}},{key:"query",get:function(){return this.id},set:function(t){this.id=t}}]),t}();function vt(t){return'\n    <div class="backdrop" data-modal>\n      <div class="modal">\n        <button type="button" class="modal-close" data-modal-close>\n          <img src="./images/close.svg" alt="modal-close" width="30" height="30" />\n        </button>\n        <div class="modal-poster">\n          <img\n            class="modal-poster__img"\n            src="https://image.tmdb.org/t/p/original/'.concat(t.poster_path,'"\n            alt="').concat(t.title,'"\n          />\n        </div>\n        <div class="modal-descr">\n          <p class="modal-title">').concat(t.title,'</p>\n          <table class="modal-info">\n            <tr>\n              <td class="modal-info__param">Vote / Votes</td>\n              <td class="modal-info__data">\n                <span class="modal-info__data-vote">').concat(t.vote_average,'</span>\n                /\n                <span class="modal-info__data-votes">').concat(t.vote_count,'</span>\n              </td>\n            </tr>\n            <tr>\n              <td class="modal-info__param">Popularity</td>\n              <td class="modal-info__data">').concat(t.popularity,'</td>\n            </tr>\n            <tr>\n              <td class="modal-info__param">Original Title</td>\n              <td class="modal-info__data">').concat(t.original_title,'</td>\n            </tr>\n            <tr>\n              <td class="modal-info__param">Genre</td>\n              <td class="modal-info__data">').concat(t.genres[0].name,'</td>\n            </tr>\n          </table>\n          <h4 class="modal-about">ABOUT</h4>\n          <p class="modal-description">').concat(t.overview,'</p>\n          <div class="modal-btns">\n            <button class="btn modal-watched">ADD TO WATCHED</button>\n            <button class="btn modal-queue">ADD TO QUEUE</button>\n          </div>\n        </div>\n      </div>\n    </div>')}var yt=document.querySelector("body"),Ct=(document.querySelector(".backdrop"),document.querySelector("js-gallery")),xt=new pt;function _t(t){console.log(t),yt.insertAdjacentHTML("beforeend",vt(t))}Ct.addEventListener("click",(function(t){if("IMG"!==t.target.nodeName)return;xt.query=t.target.datafilmid,xt.fetchMovie().then(_t)}))}();
//# sourceMappingURL=library.f2bd52d1.js.map
